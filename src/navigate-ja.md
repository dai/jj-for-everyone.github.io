# 履歴をナビゲートする

````admonish reset title="Reset your progress" collapsible=true
To reset your progress to the start of this chapter, run the following command:

```sh
curl https://jj-for-everyone.github.io/reset.sh | bash -s navigate
cd ~/jj-tutorial/repo
```
````

AliceはBobからテキストを受け取り、彼がコミットをプッシュしたと言っています。
彼女はフェッチすることを決めます：

```sh
jj git fetch
```

<!-- generated by aha script -->
<pre class="aha">
<span class="bold "></span><span class="bold green ">@</span>  <span class="bold "></span><span class="bold highlighted purple ">q</span><span class="bold highlighted dimgray ">rtwnykn</span><span class="bold "> </span><span class="bold yellow ">alice@local</span><span class="bold "> </span><span class="bold highlighted cyan ">2025-07-25 20:37:05</span><span class="bold "> </span><span class="bold highlighted blue ">c</span><span class="bold highlighted dimgray ">2f4e43e</span><span class="bold "></span>
│  <span class="bold "></span><span class="bold highlighted green ">(empty)</span><span class="bold "> </span><span class="bold highlighted green ">(no description set)</span><span class="bold "></span>
○  <span class="bold "></span><span class="bold purple ">r</span><span class="highlighted dimgray ">vpkroku</span> <span class="yellow ">alice@local</span> <span class="cyan ">2025-07-25 20:37:05</span> <span class="purple ">push-rvpkrokuqrxt</span> <span class="green ">git_head()</span> <span class="bold "></span><span class="bold blue ">b</span><span class="highlighted dimgray ">9d02faf</span>
│  WIP: Add for loop (need to fix syntax)
│ <span class="bold "></span><span class="bold highlighted cyan ">◆</span>  <span class="bold "></span><span class="bold purple ">t</span><span class="highlighted dimgray ">tqlsyyr</span> <span class="yellow ">bob@local</span> <span class="cyan ">2025-07-25 20:37:05</span> <span class="purple ">main</span> <span class="bold "></span><span class="bold blue ">2</span><span class="highlighted dimgray ">07a18a9</span>
├─╯  Add submission instructions
<span class="bold "></span><span class="bold highlighted cyan ">◆</span>  <span class="bold "></span><span class="bold purple ">s</span><span class="highlighted dimgray ">tlxrmun</span> <span class="yellow ">alice@local</span> <span class="cyan ">2025-07-25 20:37:05</span> <span class="bold "></span><span class="bold blue ">5</span><span class="highlighted dimgray ">30ad636</span>
│  <span class="green ">(empty)</span> Merge code and documentation for hello-world
~
</pre>

Bobの変更は別のブランチにあります。
彼女がそれらにアクセスする方法は？
私たちは既に2つの異なる方法でこの問題を解決しました：
- **Merge** して2つのコミットを1つのコミットに組み合わせる、2つの親を持つ。
- **Rebase** して1つのブランチのコミットをもう一方の上に移動し、直線を作成する。

この場合、どちらのアプローチも適していません、なぜなら変更を_組み合わせたくない_からです。
Aliceの変更を別のブランチに保持し、決めるまでそのままにしておきたい。

解決策はBobの変更の上に新しいコミットを作成することです、つまり `main` ブランチ。
それを達成するコマンドは：

```sh
jj new main
```

<!-- generated by aha script -->
<pre class="aha">
<span class="bold "></span><span class="bold green ">@</span>  <span class="bold "></span><span class="bold highlighted purple ">u</span><span class="highlighted dimgray ">umounxy</span><span class="bold "> </span><span class="bold yellow ">alice@local</span><span class="bold "> </span><span class="bold highlighted cyan ">2025-07-25 20:52:32</span><span class="bold "> </span><span class="bold highlighted blue ">e</span><span class="bold highlighted dimgray ">1bcff24</span><span class="bold "></span>
│  <span class="bold "></span><span class="bold highlighted green ">(empty)</span><span class="bold "> </span><span class="bold highlighted green ">(no description set)</span><span class="bold "></span>
<span class="bold "></span><span class="bold highlighted cyan ">◆</span>  <span class="bold "></span><span class="bold purple ">t</span><span class="highlighted dimgray ">tqlsyyr</span> <span class="yellow ">bob@local</span> <span class="cyan ">2025-07-25 20:37:05</span> <span class="purple ">main</span> <span class="green ">git_head()</span> <span class="bold "></span><span class="bold blue ">2</span><span class="highlighted dimgray ">07a18a9</span>
│  Add submission instructions
│ ○  <span class="bold "></span><span class="bold purple ">r</span><span class="highlighted dimgray ">vpkroku</span> <span class="yellow ">alice@local</span> <span class="cyan ">2025-07-25 20:37:05</span> <span class="purple ">push-rvpkrokuqrxt</span> <span class="bold "></span><span class="bold blue ">b</span><span class="highlighted dimgray ">9d02faf</span>
├─╯  WIP: Add for loop (need to fix syntax)
<span class="bold "></span><span class="bold highlighted cyan ">◆</span>  <span class="bold "></span><span class="bold purple ">s</span><span class="highlighted dimgray ">tlxrmun</span> <span class="yellow ">alice@local</span> <span class="cyan ">2025-07-25 20:37:05</span> <span class="bold "></span><span class="bold blue ">5</span><span class="highlighted dimgray ">30ad636</span>
│  <span class="green "></span> Merge repetition and translation of greeting
~
</pre>

同じコマンドを使用してマージコミットを作成しますが、**1つ**の親のみを指定します。
ワーキングコピーコミットを作成する単純な行為により、多くの異なるユースケースを達成できます。

空のコミットが以前ループ実験コミットの上にあったことに気づくかもしれませんが、それは今消えています。
Jujutsuは自動的に空のコミットを削除します（変更や説明なし）、なぜならそれらは親と同じプロジェクト状態だからです。
これにより `jj new` は**履歴をナビゲートする**のに適しています。
`jj new some_version` を実行することは、プロジェクトを特定のバージョンで探索するための素晴らしい方法です、なぜなら空のコミットは簡単に再作成できるからです。

例として、私たちの履歴の比較的古い状態を見てみましょう。
参照のための完全なログはこちら：

<!-- generated by aha script -->
<pre class="aha">
<span class="bold "></span><span class="bold green ">@</span>  <span class="bold "></span><span class="bold highlighted purple ">u</span><span class="bold highlighted dimgray ">umounxy</span><span class="bold "> </span><span class="bold yellow ">alice@local</span><span class="bold "> </span><span class="bold highlighted cyan ">2025-07-25 20:52:32</span><span class="bold "> </span><span class="bold highlighted blue ">e</span><span class="bold highlighted dimgray ">1bcff24</span><span class="bold "></span>
│  <span class="bold "></span><span class="bold highlighted green ">(empty)</span><span class="bold "> </span><span class="bold highlighted green ">(no description set)</span><span class="bold "></span>
<span class="bold "></span><span class="bold highlighted cyan ">◆</span>  <span class="bold "></span><span class="bold purple ">t</span><span class="highlighted dimgray ">tqlsyyr</span> <span class="yellow ">bob@local</span> <span class="cyan ">2025-07-25 20:37:05</span> <span class="purple ">main</span> <span class="green ">git_head()</span> <span class="bold "></span><span class="bold blue ">2</span><span class="highlighted dimgray ">07a18a9</span>
│  Add submission instructions
│ ○  <span class="bold "></span><span class="bold purple ">r</span><span class="highlighted dimgray ">vpkroku</span> <span class="yellow ">alice@local</span> <span class="cyan ">2025-07-25 20:37:05</span> <span class="purple ">push-rvpkrokuqrxt</span> <span class="bold "></span><span class="bold blue ">b</span><span class="highlighted dimgray ">9d02faf</span>
├─╯  WIP: Add for loop (need to fix syntax)
<span class="bold "></span><span class="bold highlighted cyan ">◆</span>    <span class="bold "></span><span class="bold purple ">s</span><span class="highlighted dimgray ">tlxrmun</span> <span class="yellow ">alice@local</span> <span class="cyan ">2025-07-25 20:37:05</span> <span class="bold "></span><span class="bold blue ">5</span><span class="highlighted dimgray ">30ad636</span>
├─╮  <span class="green ">(empty)</span> Merge code and documentation for hello-world
│ │
│ ~
│
<span class="bold "></span><span class="bold highlighted cyan ">◆</span>  <span class="bold "></span><span class="bold purple ">q</span><span class="highlighted dimgray ">xkprvsu</span> <span class="yellow ">bob@local</span> <span class="cyan ">2025-07-25 20:37:05</span> <span class="green ">git_head()</span> <span class="bold "></span><span class="bold blue ">9</span><span class="highlighted dimgray ">e05718a</span>
│  Document hello.py in README.md
~
</pre>

説明 "Document hello.py in README.md" のコミットを見てみましょう。
その change ID で簡単にそれを行うことができます、つまり `jj new qxkprvsu`。
これをより興味深いものにするために、コミットを識別する別の方法を学びます：
`description()` 関数を使用します。
それは説明に一致するコミットを選択するようにJujutsuに指示します。

```sh
jj new 'description("Document hello.py in README.md")'
```

外側の単一引用符を忘れないでください、それらはターミナルが内側の二重引用符を解釈しないようにします。
コミットを選択するための関数のようなシステムがあり、それは将来学びます。

私たちのマヌーバーを確認するためにログをチェックしましょう：

<!-- generated by aha script -->
<pre class="aha">
<span class="bold "></span><span class="bold green ">@</span>  <span class="bold "></span><span class="bold highlighted purple ">u</span><span class="bold highlighted dimgray ">xuqnppz</span><span class="bold "> </span><span class="bold yellow ">alice@local</span><span class="bold "> </span><span class="bold highlighted cyan ">2025-07-25 21:16:00</span><span class="bold "> </span><span class="bold highlighted blue ">a</span><span class="bold highlighted dimgray ">bba4830</span><span class="bold "></span>
│  <span class="bold "></span><span class="bold highlighted green ">(empty)</span><span class="bold "> </span><span class="bold highlighted green ">(no description set)</span><span class="bold "></span>
│ <span class="bold "></span><span class="bold highlighted cyan ">◆</span>  <span class="bold "></span><span class="bold purple ">t</span><span class="highlighted dimgray ">tqlsyyr</span> <span class="yellow ">bob@local</span> <span class="cyan ">2025-07-25 20:37:05</span> <span class="purple ">main</span> <span class="green ">git_head()</span> <span class="bold "></span><span class="bold blue ">2</span><span class="highlighted dimgray ">07a18a9</span>
│ │  Add submission instructions
│ │ ○  <span class="bold "></span><span class="bold purple ">r</span><span class="highlighted dimgray ">vpkroku</span> <span class="yellow ">alice@local</span> <span class="cyan ">2025-07-25 20:37:05</span> <span class="purple ">push-rvpkrokuqrxt</span> <span class="bold "></span><span class="bold blue ">b</span><span class="highlighted dimgray ">9d02faf</span>
│ ├─╯  WIP: Add for loop (need to fix syntax)
│ <span class="bold "></span><span class="bold highlighted cyan ">◆</span>  <span class="bold "></span><span class="bold purple ">s</span><span class="highlighted dimgray ">tlxrmun</span> <span class="yellow ">alice@local</span> <span class="cyan ">2025-07-25 20:37:05</span> <span class="bold "></span><span class="bold blue ">5</span><span class="highlighted dimgray ">30ad636</span>
╭─┤  <span class="green ">(empty)</span> Merge code and documentation for hello-world
│ │
│ ~
│
<span class="bold "></span><span class="bold highlighted cyan ">◆</span>  <span class="bold "></span><span class="bold purple ">q</span><span class="highlighted dimgray ">xkprvsu</span> <span class="yellow ">bob@local</span> <span class="cyan ">2025-07-25 20:37:05</span> <span class="green ">git_head()</span> <span class="bold "></span><span class="bold blue ">9</span><span class="highlighted dimgray ">e05718a</span>
│  Document hello.py in README.md
~
</pre>

素晴らしい！
私たちの履歴の古いコミットの上にコミットを作成しました。
その時点で `hello.py` ファイルは存在しなかったことを `ls` を実行して確認できます。

`jj new main` を実行してリポジトリの現在の状態に戻ることができます。

さて、AliceはBobからの最新の変更を持っています、そして彼女は他の作業を続けることができます。
彼女はいつでも `jj new` でループ実験に戻り、作業を完了し、それを `main` ブランチと組み合わせることができます。

```admonish success title="レベル2を完了しました！🎉"
今、人々と協力してプロジェクトに取り組むための基本的なスキルを持っています。
学んだことをまとめましょう：
- 分岐した履歴は複数の人が一緒に作業するときに正常です。
- 分岐した方向に変更を組み合わせるには、**merge** コミットを作成するか、コミットのブランチをもう一方の上に **rebase** します。
- バージョンコントロールからファイルを除外するには `.gitignore` と `jj file untrack` を使用します。
- 作業中の変更をリモートに安全に保存するには、追加のブックマークを使用します、`main` ブランチの混乱を避けます。
- `jj new` でリポジトリの任意のブランチや過去のバージョンに移動できます。

これで基本的なものはすべてです。
あなたは生産的で、めったに立ち往生しないはずです。
一部の読者はここでチュートリアルを止めるかもしれません。

もっと欲しい人には、次のレベルは履歴を書き換える方法を教えます。
これにより、長期的に利益をもたらす洗練されたコミット履歴を作成できます。
一部のプロジェクト（LinuxカーネルやJujutsu自体など）は、貢献者がこれらのスキルを持っていることを要求します。
履歴を書き換えることができることはまた、解放的です。
コミットをどのように分離し、何を説明するかをあまり心配せずに実験できます、なぜなら後で簡単に変更できるからです。

それにもかかわらず、今すぐ休憩を取ってください。
これまでたくさん学んだので、練習でそれをマスターすることは有益です。

この時点で、JujutsuのCLIを自分で少し探索し始めるべきです。
このチュートリアルはJujutsuが提供するすべての包括的なリファレンスではありません。
特定の作成者によるすべてのコミットを表示したいですか？
`jj log --help` を実行してそれがどのように機能するかを調べてください。
Jujutsuの動作を何らかの方法で微調整したいですか？
[設定ガイド](https://jj-vcs.github.io/jj/latest/config/) が役立つかもしれません。
```
