# ファイルの内容を復元する

````admonish reset title="Reset your progress" collapsible=true
To reset your progress to the start of this chapter, run the following command:

```sh
curl https://jj-for-everyone.github.io/reset.sh | bash -s restore
cd ~/jj-tutorial/repo
```
````

Aliceがプロジェクトの `README.md` ファイルを誤って削除したとしましょう。
その後、彼女は変更を加えましたが、ミスに気づく前に：

```sh
rm README.md
echo "    print('In soviet Russia, world greets you!')" >> hello.py
jj show
```

<!-- generated by aha script -->
<pre class="aha">
Commit ID: <span class="blue ">79cda7b43c273bb0597b7888b2ff9d3afee4a568</span>
Change ID: <span class="purple ">nwstlotvuwrnxrupxnplywqvkloupnxu</span>
Author   : <span class="yellow ">Alice</span> &lt;<span class="yellow ">alice@local</span>&gt; (<span class="cyan ">2025-08-31 16:15:13</span>)
Committer: <span class="yellow ">Alice</span> &lt;<span class="yellow ">alice@local</span>&gt; (<span class="cyan ">2025-08-31 16:15:13</span>)

<span class="yellow ">    (no description set)</span>

<span class="yellow ">Removed regular file README.md:</span>
<span class="red ">   1</span>     : <span class="red "># jj-tutorial</span>
<span class="red ">   2</span>     : <span class="red "></span>
<span class="red ">   3</span>     : <span class="red ">The file hello.py contains a script that greets the world.</span>
<span class="red ">   4</span>     : <span class="red ">It can be executed with the command 'python hello.py'.</span>
<span class="red ">   5</span>     : <span class="red ">Programming is fun!</span>
<span class="red ">   6</span>     : <span class="red "></span>
<span class="red ">   7</span>     : <span class="red ">## Submission</span>
<span class="red ">   8</span>     : <span class="red "></span>
<span class="red ">   9</span>     : <span class="red ">Run the following command to create the submission tarball:</span>
<span class="red ">  10</span>     : <span class="red "></span>
<span class="red ">  11</span>     : <span class="red ">~~~sh</span>
<span class="red ">  12</span>     : <span class="red ">tar czf submission_alice_bob.tar.gz [FILE...]</span>
<span class="red ">  13</span>     : <span class="red ">~~~</span>
<span class="yellow ">Modified regular file hello.py:</span>
<span class="red ">   1</span> <span class="green ">   1</span>: for _ in range(10):
<span class="red ">   2</span> <span class="green ">   2</span>:     print('Hello, world!')
<span class="red ">   3</span> <span class="green ">   3</span>:     print('Hallo, Welt!')
<span class="red ">   4</span> <span class="green ">   4</span>:     print('Bonjour, le monde!')
     <span class="green ">   5</span>: <span class="green ">    print('In soviet Russia, world greets you!')</span>
</pre>

これまで学んだツールはここではあまり役に立ちません。
Aliceは `jj undo` で最後のスナップショットを復元できますが、それにより `hello.py` の変更も元に戻ります。
同じことが `jj abandon` にも当てはまります。
幸い、より良い方法があります：

```sh
jj restore README.md
```

<!-- generated by aha script -->
<pre class="aha">
Commit ID: <span class="blue ">f2922ddd5ad552e1e499b461b8ed900d047cea91</span>
Change ID: <span class="purple ">nwstlotvuwrnxrupxnplywqvkloupnxu</span>
Author   : <span class="yellow ">Alice</span> &lt;<span class="yellow ">alice@local</span>&gt; (<span class="cyan ">2025-08-31 16:15:13</span>)
Committer: <span class="yellow ">Alice</span> &lt;<span class="yellow ">alice@local</span>&gt; (<span class="cyan ">2025-08-31 16:24:18</span>)

<span class="yellow ">    (no description set)</span>

<span class="yellow ">Modified regular file hello.py:</span>
<span class="red ">   1</span> <span class="green ">   1</span>: for _ in range(10):
<span class="red ">   2</span> <span class="green ">   2</span>:     print('Hello, world!')
<span class="red ">   3</span> <span class="green ">   3</span>:     print('Hallo, Welt!')
<span class="red ">   4</span> <span class="green ">   4</span>:     print('Bonjour, le monde!')
     <span class="green ">   5</span>: <span class="green ">    print('In soviet Russia, world greets you!')</span>
</pre>

完璧です、それがまさに私たちが望んでいたものです！
`jj restore` はワーキングコピーコミットの親から変更されたファイルを復元します。
しかし、追加の引数として特定のファイルの名前を与えると、それらのファイルのみを復元します。

それだけではありません、`jj restore` はもっと多くのことができます。

コミットを作成する方法についてはたくさん学びましたが、それらで何ができるかについてはあまり知りません。
`jj new <change-id>` を実行することでコミットの状態を調べることができますが、それだけです。

`jj restore` はワーキングコピーコミットの親からファイルを復元するだけでなく、**任意のコミット**からファイルを復元できます。
`--from` フラグを使用して、復元元のコミットを指定できます。

例えば、ループが機能していた状態の `hello.py` を復元しましょう、しかし翻訳なし：

```sh
jj restore --from 'description("Fix loop syntax")' hello.py
```

<!-- generated by aha script -->
<pre class="aha">
Commit ID: <span class="blue ">c72f36748528f6893316089590374efed90a4214</span>
Change ID: <span class="purple ">nwstlotvuwrnxrupxnplywqvkloupnxu</span>
Author   : <span class="yellow ">Alice</span> &lt;<span class="yellow ">alice@local</span>&gt; (<span class="cyan ">2025-08-31 16:15:13</span>)
Committer: <span class="yellow ">Alice</span> &lt;<span class="yellow ">alice@local</span>&gt; (<span class="cyan ">2025-08-31 16:43:32</span>)

<span class="yellow ">    (no description set)</span>

<span class="yellow ">Modified regular file hello.py:</span>
<span class="red ">   1</span> <span class="green ">   1</span>: for _ in range(10):
<span class="red ">   2</span> <span class="green ">   2</span>:     print('Hello, world!')
<span class="red ">   3</span>     : <span class="red ">    print('Hallo, Welt!')</span>
<span class="red ">   4</span>     : <span class="red ">    print('Bonjour, le monde!')</span>
</pre>

素晴らしい！
いつもタスクが完了したら、リモートにプッシュすることを覚えています。

```sh
jj commit -m "Remove translations"
jj bookmark move main --to @-
jj git push
```

```admonish success title="レベル3を完了しました！🎉"
今、バージョンコントロールで作業するときにほとんどの問題から自分を救い出すスキルを持っています。
学んだことをまとめましょう：
- `jj undo` はリポジトリの以前の状態にステップバイステップで戻ります。
  ミスを恐れないでください！
  自由に実験し、問題があれば `jj undo` を実行してください。
- クローンしたばかりのリポジトリでブックマークを操作したい場合、`jj bookmark track` を実行します。
- 2つのブランチが同じファイルの同じ部分を変更すると競合が発生します。
  競合を解決するには、競合マーカーを削除して適切な結果を生成します。
- 何らかの理由で必要ないコミットがある場合、`jj abandon` で削除します。
- `jj restore` でファイルの内容を復元できます。
  デフォルトではワーキングコピーコミットの親から復元しますが、`--from` フラグで任意のコミットを指定できます。

これで必要なものはほとんどすべてです。
あなたは生産的で、めったに立ち往生しないはずです。
一部の読者はここでチュートリアルを止めるかもしれません。

もっと欲しい人には、次のレベルは履歴を書き換える方法を教えます。
これにより、長期的に利益をもたらす洗練されたコミット履歴を作成できます。
一部のプロジェクト（LinuxカーネルやJujutsu自体など）は、貢献者がこれらのスキルを持っていることを要求します。
履歴を書き換えることができることはまた、解放的です。
コミットをどのように分離し、何を説明するかをあまり心配せずに実験できます、なぜなら後で簡単に変更できるからです。

それにもかかわらず、今すぐ休憩を取ってください。
これまでたくさん学んだので、練習でそれをマスターすることは有益です。

この時点で、JujutsuのCLIを自分で少し探索し始めるべきです。
このチュートリアルはJujutsuが提供するすべての包括的なリファレンスではありません。
特定の作成者によるすべてのコミットを表示したいですか？
`jj log --help` を実行してそれがどのように機能するかを調べてください。
Jujutsuの動作を何らかの方法で微調整したいですか？
[設定ガイド](https://jj-vcs.github.io/jj/latest/config/) が役立つかもしれません。
```
